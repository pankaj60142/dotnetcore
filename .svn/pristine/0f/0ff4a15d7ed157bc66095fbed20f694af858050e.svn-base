<style type="text/css">
    .page-header p {
        overflow: hidden;
    }

        .page-header p a {
            width: 200px;
            text-align: center;
        }

    .code {
        height: 500px;
        overflow: scroll;
        zoom: .84;
    }

    * {
        font-family: "source-sans-pro";
    }

    .heading {
        font-size: 180px;
        line-height: 200px;
    }

    .head, .examples, .docs {
        text-align: center;
    }

    code, pre, pre span {
        text-align: left;
        font-family: monospace;
        font-weight: normal;
        font-size: medium;
    }

    .head ul {
        list-style-type: none;
    }

    .map {
        position: relative;
        margin: 0 auto;
        width: 1000px;
        height: 500px;
    }

    .tall {
        height: 750px;
        width: 550px;
    }

    .examples h3 {
        margin-bottom: 0;
    }

    .options {
        position: relative;
        overflow: hidden;
        max-height: 21px;
        -webkit-transition: max-height 250ms ease-in;
        transition: max-height 250ms ease-in;
        -moz-transition: max-height 250ms ease-in;
    }

        .options pre {
            margin-top: 10px;
        }

        .options:hover {
            background-color: #DDD;
            cursor: pointer;
        }

        .options pre:hover {
            cursor: default;
        }

    .open {
        max-height: 5000px !important;
    }

    .options:after {
        content: "(Click to toggle code) ↓";
        color: #666;
        float: right;
        position: absolute;
        right: 10px;
        top: 10px;
    }

    #footer {
        padding: 10px 0;
        text-align: center;
    }

    sup.new {
        color: red;
    }

    path {
        stroke: white;
        stroke-width: 0.25px;
        fill: lightblue;
        cursor: pointer;
    }


    /*div.tooltip {
        color: #222;
        background: #fff;
        border-radius: 3px;
        box-shadow: 0px 0px 2px 0px #a6a6a6;
        padding: .2em;
        text-shadow: #f5f5f5 0 1px 0;
        opacity: 0.9;
        position: absolute;
        font-size: 12px;
        font-family: "Arial", sans-serif;
    }*/

    div.tooltip {
        color: black;
        background: #fff;
        border-radius: 3px;
        box-shadow: 0px 0px 2px 0px #a6a6a6;
        padding: .2em;
        text-shadow: #f5f5f5 0 1px 0;
        opacity: 0.9;
        position: absolute;
        font-size: 14px;
        font-family: "Arial", sans-serif;
        font-weight: normal;
    }


    .names {
        fill: none;
        stroke: #fff;
        stroke-linejoin: round;
    }


    /*    text{
      pointer-events:none;
    }*/

    .details {
        color: white;
    }


    .node circle {
        fill: #fff;
        stroke: orange;
        stroke-width: 2px;
        width: 10px;
        height: 10px;
    }

    .node text {
        font: 12px sans-serif;
        font-weight: normal;
    }

    .link {
        fill: none;
        stroke: black;
        stroke-width: 1px;
        stroke-dasharray: 20,10,5,5,5,10;
    }

    .nodedata circle {
        fill: #fff;
        stroke: steelblue;
        stroke-width: 3px;
    }

    .nodedata text {
        font: 12px sans-serif;
    }

    .linkdata {
        fill: none;
        stroke: #ccc;
        stroke-width: 2px;
    }



    /**Application Css starts here*/
    .nodeapp circle {
        fill: #fff;
        stroke: steelblue;
        stroke-width: 3px;
    }

    .nodeapp text {
        font: 12px sans-serif;
    }

    .linkapp {
        fill: none;
        stroke: #ccc;
        stroke-width: 2px;
    }

    /* application css Ends here*/
    /* application css Ends here*/
</style>
<div id="map"></div>

<!-- widget grid -->
<section id="widget-grid" class="">


    <!-- START ROW -->

    <div class="row">



        <!-- NEW COL START -->
        <article class="col-sm-12 col-md-12 col-lg-12">

            <!-- Widget ID (each widget will need unique ID)-->
            <div class="jarviswidget" id="wid-id-1" data-widget-editbutton="false" data-widget-custombutton="false">
                <!-- widget options:
                usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                data-widget-colorbutton="false"
                data-widget-editbutton="false"
                data-widget-togglebutton="false"
                data-widget-deletebutton="false"
                data-widget-fullscreenbutton="false"
                data-widget-custombutton="false"
                data-widget-collapsed="true"
                data-widget-sortable="false"

                -->
                <header>
                    <span class="widget-icon">
                        <i class="fa fa-map-marker"></i>
                    </span>
                    <h2>World Map</h2>

                </header>

                <!-- widget div-->
                <div>

                    <!-- widget edit box -->
                    <div class="jarviswidget-editbox">
                        <!-- This area used as dropdown edit box -->

                    </div>
                    <!-- end widget edit box -->
                    <!-- widget content -->
                    <div class="widget-body no-padding" id="UsmanTesting">


                        <div id="vector-map" class="vector-map">    </div>

                    </div>
                    <!-- end widget content -->

                </div>
                <!-- end widget div -->

            </div>
            <!-- end widget -->
            <!-- Widget ID (each widget will need unique ID)-->
            <div class="jarviswidget jarviswidget-color-darken" id="wid-id-0" data-widget-editbutton="false">
                <!-- widget options:
                usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

                data-widget-colorbutton="false"
                data-widget-editbutton="false"
                data-widget-togglebutton="false"
                data-widget-deletebutton="false"
                data-widget-fullscreenbutton="false"
                data-widget-custombutton="false"
                data-widget-collapsed="true"
                data-widget-sortable="false"

                -->
                <header>
                    <span class="widget-icon">
                        <i class="fa fa-table"></i>
                    </span>
                    <h2>Country Wise Data Visualization</h2>

                </header>

                <!-- widget div-->
                <div>

                    <!-- widget edit box -->
                    <div class="jarviswidget-editbox">
                        <!-- This area used as dropdown edit box -->

                    </div>
                    <!-- end widget edit box -->
                    <!-- widget content -->



                    <div class="widget-body no-padding">

                        <div id="mapdetails"></div>




                    </div>
                    <!-- end widget content -->

                </div>
                <!-- end widget div -->

            </div>
            <!-- end widget -->




            <div class="row">
                <div class="col-lg-6">
                    <div class="jarviswidget jarviswidget-color-darken" id="wid-id-0" data-widget-editbutton="false">
                        <!-- widget options:
            usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

            data-widget-colorbutton="false"
            data-widget-editbutton="false"
            data-widget-togglebutton="false"
            data-widget-deletebutton="false"
            data-widget-fullscreenbutton="false"
            data-widget-custombutton="false"
            data-widget-collapsed="true"
            data-widget-sortable="false"

            -->
                        <header>
                            <span class="widget-icon">
                                <i class="fa fa-table"></i>
                            </span>
                            <h2>Departmentss </h2>

                        </header>

                        <!-- widget div-->
                        <div>

                            <!-- widget edit box -->
                            <div class="jarviswidget-editbox">
                                <!-- This area used as dropdown edit box -->

                            </div>


                            <div class="widget-body no-padding">

                                <br />
                                <div id="datacentersdetail"></div>




                            </div>
                            <!-- end widget content -->

                        </div>
                        <!-- end widget div -->

                    </div>

                </div>

                <div class="col-lg-6">
                    <div class="jarviswidget jarviswidget-color-darken" id="wid-id-0" data-widget-editbutton="false">
                        <!-- widget options:
            usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

            data-widget-colorbutton="false"
            data-widget-editbutton="false"
            data-widget-togglebutton="false"
            data-widget-deletebutton="false"
            data-widget-fullscreenbutton="false"
            data-widget-custombutton="false"
            data-widget-collapsed="true"
            data-widget-sortable="false"

            -->
                        <header>
                            <span class="widget-icon">
                                <i class="fa fa-table"></i>
                            </span>
                            <h2>Application Wise Data Visualization</h2>

                        </header>

                        <!-- widget div-->
                        <div>

                            <!-- widget edit box -->
                            <div class="jarviswidget-editbox">
                                <!-- This area used as dropdown edit box -->

                            </div>


                            <div class="widget-body no-padding">

                                <br />
                                <div id="applicationdetails"></div>




                            </div>
                            <!-- end widget content -->

                        </div>
                        <!-- end widget div -->

                    </div>

                </div>

            </div>




        </article>
        <!-- END COL -->



    </div>

    <!-- END ROW -->

</section>
<!-- end widget grid -->











@section Scripts {

    <script type="text/javascript">

        var data = [{
            "name": "Video Game Sales Data Top 100",
            "children": [{
                "name": "2600",
                "children": [{
                    "name": "Pac-Man",
                    "category": "2600",
                    "value": "7.81"
                }]
            },
            {
                "name": "Wii",
                "children": [{
                    "name": "Wii Sports",
                    "category": "Wii",
                    "value": "82.53"
                },
                {
                    "name": "Mario Kart Wii",
                    "category": "Wii",
                    "value": "35.52"
                },
                {
                    "name": "Wii Sports Resort",
                    "category": "Wii",
                    "value": "32.77"
                },
                {
                    "name": "Wii Play",
                    "category": "Wii",
                    "value": "28.92"
                },
                {
                    "name": "New Super Mario Bros. Wii",
                    "category": "Wii",
                    "value": "28.32"
                },
                {
                    "name": "Wii Fit",
                    "category": "Wii",
                    "value": "22.7"
                },
                {
                    "name": "Wii Fit Plus",
                    "category": "Wii",
                    "value": "21.79"
                },
                {
                    "name": "Super Smash Bros. Brawl",
                    "category": "Wii",
                    "value": "12.84"
                },
                {
                    "name": "Super Mario Galaxy",
                    "category": "Wii",
                    "value": "11.35"
                },
                {
                    "name": "Just Dance 3",
                    "category": "Wii",
                    "value": "10.12"
                },
                {
                    "name": "Just Dance 2",
                    "category": "Wii",
                    "value": "9.44"
                },
                {
                    "name": "Wii Party",
                    "category": "Wii",
                    "value": "8.38"
                },
                {
                    "name": "Mario Party 8",
                    "category": "Wii",
                    "value": "8.27"
                },
                {
                    "name": "Mario & Sonic at the Olympic Games",
                    "category": "Wii",
                    "value": "7.99"
                },
                {
                    "name": "Super Mario Galaxy 2",
                    "category": "Wii",
                    "value": "7.51"
                }
                ]
            },
            {
                "name": "NES",
                "children": [{
                    "name": "Super Mario Bros.",
                    "category": "NES",
                    "value": "40.24"
                },
                {
                    "name": "Duck Hunt",
                    "category": "NES",
                    "value": "28.31"
                },
                {
                    "name": "Super Mario Bros. 3",
                    "category": "NES",
                    "value": "17.28"
                },
                {
                    "name": "Super Mario Bros. 2",
                    "category": "NES",
                    "value": "7.46"
                }
                ]
            },
            {
                "name": "GB",
                "children": [{
                    "name": "Pokemon Red/Pokemon Blue",
                    "category": "GB",
                    "value": "31.37"
                },
                {
                    "name": "Tetris",
                    "category": "GB",
                    "value": "30.26"
                },
                {
                    "name": "Pokemon Gold/Pokemon Silver",
                    "category": "GB",
                    "value": "23.1"
                },
                {
                    "name": "Super Mario Land",
                    "category": "GB",
                    "value": "18.14"
                },
                {
                    "name": "Pokémon Yellow: Special Pikachu Edition",
                    "category": "GB",
                    "value": "14.64"
                },
                {
                    "name": "Super Mario Land 2: 6 Golden Coins",
                    "category": "GB",
                    "value": "11.18"
                }
                ]
            },
            {
                "name": "DS",
                "children": [{
                    "name": "New Super Mario Bros.",
                    "category": "DS",
                    "value": "29.8"
                },
                {
                    "name": "Nintendogs",
                    "category": "DS",
                    "value": "24.67"
                },
                {
                    "name": "Mario Kart DS",
                    "category": "DS",
                    "value": "23.21"
                },
                {
                    "name": "Brain Age: Train Your Brain in Minutes a Day",
                    "category": "DS",
                    "value": "20.15"
                },
                {
                    "name": "Pokemon Diamond/Pokemon Pearl",
                    "category": "DS",
                    "value": "18.25"
                },
                {
                    "name": "Brain Age 2: More Training in Minutes a Day",
                    "category": "DS",
                    "value": "15.29"
                },
                {
                    "name": "Pokemon Black/Pokemon White",
                    "category": "DS",
                    "value": "15.14"
                },
                {
                    "name": "Animal Crossing: Wild World",
                    "category": "DS",
                    "value": "12.13"
                },
                {
                    "name": "Pokemon HeartGold/Pokemon SoulSilver",
                    "category": "DS",
                    "value": "11.77"
                },
                {
                    "name": "Super Mario 64",
                    "category": "DS",
                    "value": "10.3"
                },
                {
                    "name": "Mario Party DS",
                    "category": "DS",
                    "value": "8.91"
                },
                {
                    "name": "Pokemon Black 2/Pokemon White 2",
                    "category": "DS",
                    "value": "8.07"
                },
                {
                    "name": "Pokémon Platinum Version",
                    "category": "DS",
                    "value": "7.72"
                }
                ]
            },
            {
                "name": "X360",
                "children": [{
                    "name": "Kinect Adventures!",
                    "category": "X360",
                    "value": "21.81"
                },
                {
                    "name": "Grand Theft Auto V",
                    "category": "X360",
                    "value": "16.27"
                },
                {
                    "name": "Call of Duty: Modern Warfare 3",
                    "category": "X360",
                    "value": "14.73"
                },
                {
                    "name": "Call of Duty: Black Ops",
                    "category": "X360",
                    "value": "14.61"
                },
                {
                    "name": "Call of Duty: Black Ops II",
                    "category": "X360",
                    "value": "13.67"
                },
                {
                    "name": "Call of Duty: Modern Warfare 2",
                    "category": "X360",
                    "value": "13.47"
                },
                {
                    "name": "Halo 3",
                    "category": "X360",
                    "value": "12.12"
                },
                {
                    "name": "Grand Theft Auto IV",
                    "category": "X360",
                    "value": "11.01"
                },
                {
                    "name": "Call of Duty: Ghosts",
                    "category": "X360",
                    "value": "10.25"
                },
                {
                    "name": "Halo: Reach",
                    "category": "X360",
                    "value": "9.86"
                },
                {
                    "name": "Halo 4",
                    "category": "X360",
                    "value": "9.71"
                },
                {
                    "name": "Call of Duty 4: Modern Warfare",
                    "category": "X360",
                    "value": "9.31"
                },
                {
                    "name": "Minecraft",
                    "category": "X360",
                    "value": "9.18"
                },
                {
                    "name": "The Elder Scrolls V: Skyrim",
                    "category": "X360",
                    "value": "8.79"
                }
                ]
            },
            {
                "name": "PS3",
                "children": [{
                    "name": "Grand Theft Auto V",
                    "category": "PS3",
                    "value": "21.04"
                },
                {
                    "name": "Call of Duty: Black Ops II",
                    "category": "PS3",
                    "value": "13.79"
                },
                {
                    "name": "Call of Duty: Modern Warfare 3",
                    "category": "PS3",
                    "value": "13.32"
                },
                {
                    "name": "Call of Duty: Black Ops",
                    "category": "PS3",
                    "value": "12.63"
                },
                {
                    "name": "Gran Turismo 5",
                    "category": "PS3",
                    "value": "10.7"
                },
                {
                    "name": "Call of Duty: Modern Warfare 2",
                    "category": "PS3",
                    "value": "10.6"
                },
                {
                    "name": "Grand Theft Auto IV",
                    "category": "PS3",
                    "value": "10.5"
                },
                {
                    "name": "Call of Duty: Ghosts",
                    "category": "PS3",
                    "value": "9.36"
                },
                {
                    "name": "FIFA Soccer 13",
                    "category": "PS3",
                    "value": "8.16"
                }
                ]
            },
            {
                "name": "PS2",
                "children": [{
                    "name": "Grand Theft Auto: San Andreas",
                    "category": "PS2",
                    "value": "20.81"
                },
                {
                    "name": "Grand Theft Auto: Vice City",
                    "category": "PS2",
                    "value": "16.15"
                },
                {
                    "name": "Gran Turismo 3: A-Spec",
                    "category": "PS2",
                    "value": "14.98"
                },
                {
                    "name": "Grand Theft Auto III",
                    "category": "PS2",
                    "value": "13.1"
                },
                {
                    "name": "Gran Turismo 4",
                    "category": "PS2",
                    "value": "11.66"
                },
                {
                    "name": "Final Fantasy X",
                    "category": "PS2",
                    "value": "8.05"
                }
                ]
            },
            {
                "name": "SNES",
                "children": [{
                    "name": "Super Mario World",
                    "category": "SNES",
                    "value": "20.61"
                },
                {
                    "name": "Super Mario All-Stars",
                    "category": "SNES",
                    "value": "10.55"
                },
                {
                    "name": "Donkey Kong Country",
                    "category": "SNES",
                    "value": "9.3"
                },
                {
                    "name": "Super Mario Kart",
                    "category": "SNES",
                    "value": "8.76"
                }
                ]
            },
            {
                "name": "GBA",
                "children": [{
                    "name": "Pokemon Ruby/Pokemon Sapphire",
                    "category": "GBA",
                    "value": "15.85"
                },
                {
                    "name": "Pokemon FireRed/Pokemon LeafGreen",
                    "category": "GBA",
                    "value": "10.49"
                }
                ]
            },
            {
                "name": "PS4",
                "children": [{
                    "name": "Call of Duty: Black Ops 3",
                    "category": "PS4",
                    "value": "14.63"
                },
                {
                    "name": "Grand Theft Auto V",
                    "category": "PS4",
                    "value": "12.61"
                },
                {
                    "name": "FIFA 16",
                    "category": "PS4",
                    "value": "8.57"
                },
                {
                    "name": "Star Wars Battlefront (2015)",
                    "category": "PS4",
                    "value": "7.98"
                },
                {
                    "name": "Call of Duty: Advanced Warfare",
                    "category": "PS4",
                    "value": "7.66"
                },
                {
                    "name": "FIFA 17",
                    "category": "PS4",
                    "value": "7.59"
                }
                ]
            },
            {
                "name": "3DS",
                "children": [{
                    "name": "Pokemon X/Pokemon Y",
                    "category": "3DS",
                    "value": "14.6"
                },
                {
                    "name": "Mario Kart 7",
                    "category": "3DS",
                    "value": "12.66"
                },
                {
                    "name": "Pokemon Omega Ruby/Pokemon Alpha Sapphire",
                    "category": "3DS",
                    "value": "11.68"
                },
                {
                    "name": "Super Mario 3D Land",
                    "category": "3DS",
                    "value": "10.81"
                },
                {
                    "name": "New Super Mario Bros. 2",
                    "category": "3DS",
                    "value": "9.9"
                },
                {
                    "name": "Animal Crossing: New Leaf",
                    "category": "3DS",
                    "value": "9.16"
                },
                {
                    "name": "Super Smash Bros. for Wii U and 3DS",
                    "category": "3DS",
                    "value": "7.55"
                }
                ]
            },
            {
                "name": "N64",
                "children": [{
                    "name": "Super Mario 64",
                    "category": "N64",
                    "value": "11.89"
                },
                {
                    "name": "Mario Kart 64",
                    "category": "N64",
                    "value": "9.87"
                },
                {
                    "name": "GoldenEye 007",
                    "category": "N64",
                    "value": "8.09"
                },
                {
                    "name": "The Legend of Zelda: Ocarina of Time",
                    "category": "N64",
                    "value": "7.6"
                }
                ]
            },
            {
                "name": "PS",
                "children": [{
                    "name": "Gran Turismo",
                    "category": "PS",
                    "value": "10.95"
                },
                {
                    "name": "Final Fantasy VII",
                    "category": "PS",
                    "value": "9.72"
                },
                {
                    "name": "Gran Turismo 2",
                    "category": "PS",
                    "value": "9.49"
                },
                {
                    "name": "Final Fantasy VIII",
                    "category": "PS",
                    "value": "7.86"
                },
                {
                    "name": "Crash Bandicoot 2: Cortex Strikes Back",
                    "category": "PS",
                    "value": "7.58"
                }
                ]
            },
            {
                "name": "XB",
                "children": [{
                    "name": "Halo 2",
                    "category": "XB",
                    "value": "8.49"
                }]
            },
            {
                "name": "PC",
                "children": [{
                    "name": "The Sims 3",
                    "category": "PC",
                    "value": "8.01"
                }]
            },
            {
                "name": "PSP",
                "children": [{
                    "name": "Grand Theft Auto: Liberty City Stories",
                    "category": "PSP",
                    "value": "7.69"
                }]
            },
            {
                "name": "XOne",
                "children": [{
                    "name": "Call of Duty: Black Ops 3",
                    "category": "XOne",
                    "value": "7.39"
                }]
            }
            ]
        }];

        var sample_data = [
            { "value": 100, "name": "alpha", "group": "group 1" },
            { "value": 70, "name": "beta", "group": "group 2" },
            { "value": 40, "name": "gamma", "group": "group 2" },
            { "value": 15, "name": "delta", "group": "group 2" },
            { "value": 5, "name": "epsilon", "group": "group 1" },
            { "value": 1, "name": "zeta", "group": "group 1" }
        ]

        //new d3plus.Treemap()
        //    .data(sample_data)        
        //    .on({
        //        click: function () {
        //            if (this._tooltip) {
        //                this._tooltipClass.data([]).render();
        //            }
        //        }
        //    })
        //    .sum("value")
        //    .groupBy(["group", "name"])
        //    .depth(1)   
        //    .render();



        var authors = [
            {
                "id_author": "vsj2slIAAAAJ",
                "name": "Albert-László Barabási",
                "name_reduced": "",
                "institution": "neu.edu",
                "description": "Northeastern University, Harvard Medical School",
                "homepage": "http:\/\/www.barabasilab.com\/",
                "labels": "[u'network_science', u'statistical_physics', u'biological_physics', u'physics', u'medicine']",
                "coauthors_quantity": "",
                "cites": "",
                "cites_all": 100414,
                "h_index": 97,
                "ten_index": 216,
                "cites_08": 63073,
                "h_index_08": 82,
                "ten_index_08": 182,
                "info_update": "2013-10-05 13:33:35",
                "crawl_parent": "",
                "crawl_date": "",
                "crawl_coauthors_advance": "",
                "crawl_coauthors_complete": "",
                "crawl_publications_complete": ""
            }
        ]

        var fields = [
            {
                "id_field": 1100,
                "field": "Agricultural and Biological Sciences",
                "field_color": 1100
            },
            {
                "id_field": 1200,
                "field": "Arts and Humanities",
                "field_color": 1200
            },
            {
                "id_field": 1300,
                "field": "Biochemistry, Genetics and Molecular Biology",
                "field_color": 1300
            },
            {
                "id_field": 1400,
                "field": "Business, Management and Accounting",
                "field_color": 1400
            },
            {
                "id_field": 1500,
                "field": "Chemical Engineering",
                "field_color": 1500
            },
            {
                "id_field": 1600,
                "field": "Chemistry",
                "field_color": 1600
            },
            {
                "id_field": 1700,
                "field": "Computer Science",
                "field_color": 1700
            },
            {
                "id_field": 1800,
                "field": "Decision Sciences",
                "field_color": 1800
            },
            {
                "id_field": 3500,
                "field": "Dentistry",
                "field_color": 3500
            },
            {
                "id_field": 1900,
                "field": "Earth and Planetary Sciences",
                "field_color": 1900
            },
            {
                "id_field": 2000,
                "field": "Economics, Econometrics and Finance",
                "field_color": 2000
            },
            {
                "id_field": 2100,
                "field": "Energy",
                "field_color": 2100
            },
            {
                "id_field": 2200,
                "field": "Engineering",
                "field_color": 2200
            },
            {
                "id_field": 2300,
                "field": "Environmental Science",
                "field_color": 2300
            },
            {
                "id_field": 3600,
                "field": "Health Professions",
                "field_color": 3600
            },
            {
                "id_field": 2400,
                "field": "Immunology and Microbiology",
                "field_color": 2400
            },
            {
                "id_field": 2500,
                "field": "Materials Science",
                "field_color": 2500
            },
            {
                "id_field": 2600,
                "field": "Mathematics",
                "field_color": 2600
            },
            {
                "id_field": 2700,
                "field": "Medicine",
                "field_color": 2700
            },
            {
                "id_field": 1000,
                "field": "Multidisciplinary",
                "field_color": 1000
            },
            {
                "id_field": 2800,
                "field": "Neuroscience",
                "field_color": 2800
            },
            {
                "id_field": 2900,
                "field": "Nursing",
                "field_color": 2900
            },
            {
                "id_field": 3000,
                "field": "Pharmacology, Toxicology and Pharmaceutics",
                "field_color": 3000
            },
            {
                "id_field": 3100,
                "field": "Physics and Astronomy",
                "field_color": 3100
            },
            {
                "id_field": 3200,
                "field": "Psychology",
                "field_color": 3200
            },
            {
                "id_field": 3300,
                "field": "Social Sciences",
                "field_color": 3300
            },
            {
                "id_field": 3400,
                "field": "Veterinary",
                "field_color": 3400
            }
        ]

        var categories = [{
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1000,
            "id_category": 1000,
            "category": "Multidisciplinary",
            "field_name_not_used": "Multidisciplinary",
            "publications": 51,
            "intensity": 51.0

        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1100,
            "id_category": 1101,
            "category": "Agricultural and Biological Sciences (miscellaneous)",
            "field_name_not_used": "Agricultural and Biological Sciences",
            "publications": 2,
            "intensity": 2.0
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1100,
            "id_category": 1105,
            "category": "Ecology, Evolution, Behavior and Systematics",
            "field_name_not_used": "Agricultural and Biological Sciences",
            "publications": 5,
            "intensity": 1.0714285714285712
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1300,
            "id_category": 1301,
            "category": "Biochemistry, Genetics and Molecular Biology (miscellaneous)",
            "field_name_not_used": "Biochemistry, Genetics and Molecular Biology",
            "publications": 6,
            "intensity": 4.166666666666666
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1300,
            "id_category": 1303,
            "category": "Biochemistry",
            "field_name_not_used": "Biochemistry, Genetics and Molecular Biology",
            "publications": 1,
            "intensity": 1.0
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1300,
            "id_category": 1305,
            "category": "Biotechnology",
            "field_name_not_used": "Biochemistry, Genetics and Molecular Biology",
            "publications": 4,
            "intensity": 1.8333333333333333
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1300,
            "id_category": 1306,
            "category": "Cancer Research",
            "field_name_not_used": "Biochemistry, Genetics and Molecular Biology",
            "publications": 1,
            "intensity": 0.5
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1300,
            "id_category": 1307,
            "category": "Cell Biology",
            "field_name_not_used": "Biochemistry, Genetics and Molecular Biology",
            "publications": 3,
            "intensity": 1.3333333333333333
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1300,
            "id_category": 1310,
            "category": "Endocrinology",
            "field_name_not_used": "Biochemistry, Genetics and Molecular Biology",
            "publications": 1,
            "intensity": 1.0
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1300,
            "id_category": 1311,
            "category": "Genetics",
            "field_name_not_used": "Biochemistry, Genetics and Molecular Biology",
            "publications": 11,
            "intensity": 6.571428571428573
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1300,
            "id_category": 1312,
            "category": "Molecular Biology",
            "field_name_not_used": "Biochemistry, Genetics and Molecular Biology",
            "publications": 9,
            "intensity": 2.6547619047619047
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1300,
            "id_category": 1314,
            "category": "Physiology",
            "field_name_not_used": "Biochemistry, Genetics and Molecular Biology",
            "publications": 1,
            "intensity": 0.5
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1300,
            "id_category": 1315,
            "category": "Structural Biology",
            "field_name_not_used": "Biochemistry, Genetics and Molecular Biology",
            "publications": 1,
            "intensity": 0.25
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1400,
            "id_category": 1408,
            "category": "Strategy and Management",
            "field_name_not_used": "Business, Management and Accounting",
            "publications": 1,
            "intensity": 0.5
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1600,
            "id_category": 1601,
            "category": "Chemistry (miscellaneous)",
            "field_name_not_used": "Chemistry",
            "publications": 2,
            "intensity": 0.6666666666666666
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1700,
            "id_category": 1702,
            "category": "Artificial Intelligence",
            "field_name_not_used": "Computer Science",
            "publications": 1,
            "intensity": 0.3333333333333333
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1700,
            "id_category": 1703,
            "category": "Computational Theory and Mathematics",
            "field_name_not_used": "Computer Science",
            "publications": 4,
            "intensity": 0.5714285714285714
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1700,
            "id_category": 1706,
            "category": "Computer Science Applications",
            "field_name_not_used": "Computer Science",
            "publications": 1,
            "intensity": 0.5
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1700,
            "id_category": 1710,
            "category": "Information Systems",
            "field_name_not_used": "Computer Science",
            "publications": 1,
            "intensity": 0.3333333333333333
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 1800,
            "id_category": 1802,
            "category": "Information Systems and Management",
            "field_name_not_used": "Decision Sciences",
            "publications": 1,
            "intensity": 1.0
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2000,
            "id_category": 2003,
            "category": "Finance",
            "field_name_not_used": "Economics, Econometrics and Finance",
            "publications": 1,
            "intensity": 0.5
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2200,
            "id_category": 2204,
            "category": "Biomedical Engineering",
            "field_name_not_used": "Engineering",
            "publications": 3,
            "intensity": 1.5
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2200,
            "id_category": 2207,
            "category": "Control and Systems Engineering",
            "field_name_not_used": "Engineering",
            "publications": 1,
            "intensity": 0.3333333333333333
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2300,
            "id_category": 2303,
            "category": "Ecology",
            "field_name_not_used": "Environmental Science",
            "publications": 4,
            "intensity": 0.5714285714285714
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2400,
            "id_category": 2402,
            "category": "Applied Microbiology and Biotechnology",
            "field_name_not_used": "Immunology and Microbiology",
            "publications": 2,
            "intensity": 0.6666666666666666
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2400,
            "id_category": 2403,
            "category": "Immunology",
            "field_name_not_used": "Immunology and Microbiology",
            "publications": 2,
            "intensity": 0.6666666666666666
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2400,
            "id_category": 2404,
            "category": "Microbiology",
            "field_name_not_used": "Immunology and Microbiology",
            "publications": 2,
            "intensity": 0.6666666666666666
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2500,
            "id_category": 2501,
            "category": "Materials Science (miscellaneous)",
            "field_name_not_used": "Materials Science",
            "publications": 1,
            "intensity": 1.0
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2500,
            "id_category": 2504,
            "category": "Electronic, Optical and Magnetic Materials",
            "field_name_not_used": "Materials Science",
            "publications": 1,
            "intensity": 1.0
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2600,
            "id_category": 2601,
            "category": "Mathematics (miscellaneous)",
            "field_name_not_used": "Mathematics",
            "publications": 1,
            "intensity": 1.0
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2600,
            "id_category": 2604,
            "category": "Applied Mathematics",
            "field_name_not_used": "Mathematics",
            "publications": 1,
            "intensity": 0.25
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2600,
            "id_category": 2610,
            "category": "Mathematical Physics",
            "field_name_not_used": "Mathematics",
            "publications": 10,
            "intensity": 4.75
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2600,
            "id_category": 2611,
            "category": "Modeling and Simulation",
            "field_name_not_used": "Mathematics",
            "publications": 6,
            "intensity": 1.0714285714285712
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2600,
            "id_category": 2613,
            "category": "Statistics and Probability",
            "field_name_not_used": "Mathematics",
            "publications": 1,
            "intensity": 0.25
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2700,
            "id_category": 2701,
            "category": "Medicine (miscellaneous)",
            "field_name_not_used": "Medicine",
            "publications": 7,
            "intensity": 2.571428571428571
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2700,
            "id_category": 2705,
            "category": "Cardiology and Cardiovascular Medicine",
            "field_name_not_used": "Medicine",
            "publications": 1,
            "intensity": 0.5
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2700,
            "id_category": 2716,
            "category": "Genetics (clinical)",
            "field_name_not_used": "Medicine",
            "publications": 2,
            "intensity": 1.0
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 2700,
            "id_category": 2730,
            "category": "Oncology",
            "field_name_not_used": "Medicine",
            "publications": 1,
            "intensity": 0.5
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 3100,
            "id_category": 3101,
            "category": "Physics and Astronomy (miscellaneous)",
            "field_name_not_used": "Physics and Astronomy",
            "publications": 43,
            "intensity": 41.66666666666667
        }, {
            "id_author": "vsj2slIAAAAJ",
            "id_field": 3100,
            "id_category": 3109,
            "category": "Statistical and Nonlinear Physics",
            "field_name_not_used": "Physics and Astronomy",
            "publications": 10,
            "intensity": 4.75
        }]

        var attrs = {
            "id_author": authors,
            "id_field": fields,
            "id_category": categories
        }

        // set attributes on our viz object
        new d3plus.Treemap()      
            .data(categories)          
            .sum("intensity")
            .groupBy(["id_author", "id_field", "id_category"])           
            .depth(1)                
            .render()




        var countryjsonobject;


        $.ajax({
            url: '/Home/GetDefinedCountries',
            type: 'POST',
            datatype: 'json',
            async: false,
            error: function (jqXHR, textStatus, errorThrown) {
                alert(errorThrown);

            },
            success: function (result) {
                countryjsonobject = result;

             




            }
        });



        var width = document.getElementById("vector-map").clientWidth,
            height = document.getElementById("vector-map").clientHeight;

        //var width = 1200,
        //    height = 510;
        var countryCode = 826;


        // Some code for the country label tooltip
        var offsetL = document.getElementById('map').offsetLeft + 1;
        var offsetT = document.getElementById('map').offsetTop + 1;

        var tooltip = d3.select("#map")
            .append("div")
            .attr("class", "tooltip hidden");



        




        var projection = d3.geoMercator()
            .center([0, 20])
            .scale(width / 9)
            //.scale(150)
            .translate([width / 2, height / 2])







        var svg = d3.select("#vector-map").append("svg")
            .attr("width", width)
            .attr("height", height);
        var path = d3.geoPath()
            .projection(projection);
        var g = svg.append("g");

        var countryobject = countryjsonobject;


        d3.json("world-110m2.json", function (error, topology) {


            var countries = topojson.feature(topology, topology.objects.countries);

            var selectedcolor;





            g.selectAll(".country")
                .data(topojson.feature(topology, topology.objects.countries)
                    .features)
                .enter().insert("path", ".graticule")
                .attr("class", "country")
                .attr("d", path)
                .on("mousemove", function (d, i) {
                    var mouse = d3.mouse(svg.node())
                        .map(function (d) { return parseInt(d); });
                    tooltip.classed("hidden", false)
                        .attr("style", "left:" + (mouse[0] + offsetL) + "px;top:" + (mouse[1] + offsetT) + "px")
                        .html(ShowCountryName(countryobject, d.id));
                })
                .on("mouseover", function (d, i) {
                    selectedcolor = d3.select(this).attr("r", 10).style("fill");
                    d3.select(this).attr("r", 10).style("fill", "#2874A6");
                })
                .on("mouseout", function () {
                    d3.select(this).attr("r", 10).style("fill", selectedcolor);

                })

                .on('click', function (d, i) {

                    var mouse = d3.mouse(svg.node())
                        .map(function (d) { return parseInt(d); });
                   
                    //var x = document.getElementById("wid-id-1");
                    //x.classList.add("jarviswidget-collapsed");
                   
                    document.querySelector('.jarviswidget-toggle-btn').click();
                    fillData(d.id);

                    // document.getElementsByClassName('jarviswidget-toggle-btn').click();
                    //document.getElementById("wid-id-1").setAttribute('data-widget-collapsed', 'true');
                    // document.getElementsByTagName("i").class = "fa fa-plus";


                })
                .style("fill", function (d) {

                    if (FoundInCountries(countryobject, d.id)) {


                        return '#2196F3';
                    }
                    else {
                        return 'lightgray';
                    }

                });




            // load and display the cities
            //d3.csv("cities.csv", function (error, data) {
            //    g.selectAll("circle")
            //        .data(data)
            //        .enter()
            //        .append("a")
            //        .attr("xlink:href", function (d) {
            //            return "https://www.google.com/search?q=" + d.city;
            //        }
            //        )
            //        .append("circle")
            //        .attr("cx", function (d) {
            //            return projection([d.lon, d.lat])[0];
            //        })
            //        .attr("cy", function (d) {
            //            return projection([d.lon, d.lat])[1];
            //        })
            //        .attr("r", 3)
            //        .style("fill", "maroon");
            //});


            g.selectAll("path")
                .data(topojson.feature(topology, topology.objects.countries)
                    .features)
                .enter()
                .append("path")
                .attr("d", path)

        });
        // zoom and pan


        var zoom = d3.zoom()
            .on("zoom", function () {

                g.attr("transform", d3.event.transform)

                g.selectAll("circle")
                    .attr("d", path.projection(projection));
                g.selectAll("path")
                    .attr("d", path.projection(projection));
            });



        svg.call(zoom)


        function FoundInCountries(countryobject, id) {


            for (var i = 0; i < countryobject.length; i++) {
                console.log(countryobject[i].id.toString());
                if (countryobject[i].id.toString() == id.toString()) {

                    return true;

                }
            }

            return false;

        }


        function ShowCountryName(countryobject, id) {
            for (var i = 0; i < countryobject.length; i++) {

                if (countryobject[i].id.toString() == id.toString()) {

                    return countryobject[i].name.toString();

                }
            }

            return "";
        }


        /*function FillData Strats here */

        function fillData(countryid) {

            document.getElementById("mapdetails").innerHTML = "";

            var fields = [
                "id",
                "name",
                "tag.analytics.aggname",
                "tag.analytics.jobname",
                "tag.analytics.metric",
                "tag.kubernetes.namespace.creationTimestamp",
                "tag.kubernetes.namespace.name",
                "tag.kubernetes.namespace.phase",
                "tag.kubernetes.namespace.uid",
                "tag.kubernetes.node.ExternalIP",
                "tag.kubernetes.node.Hostname",
                "tag.kubernetes.node.InternalIP",
                "tag.kubernetes.node.creationTimestamp",
                "tag.kubernetes.node.name",
                "tag.kubernetes.node.uid",
                "tag.kubernetes.pod.creationTimestamp",
                "tag.kubernetes.pod.hostIP",
                "tag.kubernetes.pod.label.app",
                "tag.kubernetes.pod.label.chart",
                "tag.kubernetes.pod.label.component",
                "tag.kubernetes.pod.label.controller-revision-hash",
                "tag.kubernetes.pod.label.heritage",
                "tag.kubernetes.pod.label.k8s-app",
                "tag.kubernetes.pod.label.kubernetes.io/cluster-service",
                "tag.kubernetes.pod.label.name",
                "tag.kubernetes.pod.label.pod-template-generation",
                "tag.kubernetes.pod.label.pod-template-hash",
                "tag.kubernetes.pod.label.release",
                "tag.kubernetes.pod.label.tier",
                "tag.kubernetes.pod.name",
                "tag.kubernetes.pod.phase",
                "tag.kubernetes.pod.podIP",
                "tag.kubernetes.pod.uid",
                "tag.kubernetes.service",
                "tag.kubernetes.type",
                "tag.collector",
                "units"
            ]

            var key = "tag.kubernetes.pod.label.release";

            const buildTree = (fields) => {
                let tree = {
                    "name": "tags",
                    "children": []
                }

                const addNodes = (tag) => {
                    for (let i = 0; i < root.children.length; i++) {
                        if (tag === root.children[i].name) {
                            root = root.children[i];
                            return;
                        }
                    }
                    root.children.push({
                        'name': tag,
                        children: []
                    })
                    root = root.children[root.children.length - 1]
                }

                fields.forEach((field) => {
                    tags = field.split('.');
                    root = tree;
                    tags.forEach(addNodes)
                })
                return tree;
            }

           var realData;
            



            $.ajax({
                url: '/Home/GetDataCenterTreeForCountry',
                type: 'POST',
                datatype: 'json',
                data: { countryid: countryid },
                async: false,
                error: function (jqXHR, textStatus, errorThrown) {
                    alert(errorThrown);

                },
                success: function (result) {
                    //realData = { "name": "pak" };

                //    realData = {
                //         "name": "Max" ,
                //     "name": "Hagbard" ,
                //     "name": "Karl" 
                //};

                    realData = result;
                   
                 

                }
            });



           


            // Set the dimensions and margins of the diagram
            var margin = { top: 0, right: 0, bottom: 30, left: 70 },
                width = window.innerWidth - margin.left - margin.right,
                height = 700 - margin.top - margin.bottom;

            // append the svg object to the body of the page
            // appends a 'group' element to 'svg'
            // moves the 'group' element to the top left margin
            var svg = d3.select("#mapdetails").append("svg")
                .attr("id", "svg")
                .attr("width", width + margin.right + margin.left)
                .attr("height", height + margin.top + margin.bottom)
                // .attr("preserveAspectRatio", "xMinYMin meet")
                //   .attr("viewBox", `0 0 ${width} ${height}`)
                .append("g")
                .attr("transform", "translate("
                    + margin.left + "," + margin.top + ")");



            // declares a tree layout and assigns the size
            var treemap = d3.tree().size([height, width]);
            var i = 0,
                duration = 750,
                root;
            // Assigns parent, children, height, depth
            root = d3.hierarchy(realData, function (d) { return d.children; });
            root.x0 = height / 2;
            root.y0 = 0;

            // Collapse after the second level
            // root.children.forEach(collapse);

            // collapse all
            expand(root)
            expandOnKey(key, root);
            update(root);

            //Expand the tree based on key
            function expandOnKey(key, root) {
                var node = root;
                var tags = key.split(".");
                while (tags.length > 0) {
                    var found = false;
                    var next = tags[0]
                    if (node._children) {
                        node._children.forEach((child) => {
                            if (child.data.name === next) {
                                // expand this node
                                node.children = node._children;
                                node._children = null;
                                // change fill color
                                node.class = 'match'
                                child.class = 'match';
                                node = child;
                                found = true;
                            }
                        })
                    }
                    if (found) {
                        tags.shift()
                    } else {
                        return;
                    }
                }
            }


            // Collapse the node and all it's children
            function collapse(d) {
                if (d.children) {
                    d._children = d.children
                    d._children.forEach(collapse)
                    d.children = null
                }
            }

            function expand(d) {
                var children = (d.children) ? d.children : d._children;
                if (d._children) {
                    d.children = d._children;
                    d._children = null;
                }
                if (children)
                    children.forEach(expand);
            }
            function getHeight(root) {
                if (!root) {
                    return 0
                }
                let expandChildren = [0]
                // if root has expanded children
                if (root.children) {
                    expandChildren = root.children.map(ea => getHeight(ea))
                }
                const max = expandChildren.reduce((a, b) => Math.max(a, b))
                return 1 + max
            }

            function update(source) {
                var currentHeight = getHeight(root);
                var newWidth = window.innerWidth;
                document.getElementById("svg").style.width = newWidth;
                // Assigns the x and y position for the nodes
                var realData = treemap(root);

                // Compute the new tree layout.
                var nodes = realData.descendants(),
                    links = realData.descendants().slice(1);

                // Normalize for current-depth.
                nodes.forEach(function (d) { d.y = d.depth * window.innerWidth / (currentHeight + Math.log(currentHeight - 1)) });
                // ****************** Nodes section ***************************
                // create tip for nodes
                // var tip = d3.tip()
                //   .attr('class', 'd3-tip')
                //   .offset([-10, 0])
                //   .html(function(d) {
                //     return getPath(d)
                //   })

                // Update the nodes...
                var node = svg.selectAll('g.node')
                    .data(nodes, function (d) { return d.id || (d.id = ++i); });



                // Enter any new modes at the parent's previous position.
                var nodeEnter = node.enter().append('g')
                    .attr('class', 'node')
                    .attr("transform", function (d) {
                        return "translate(" + source.y0 + "," + source.x0 + ")";
                    })
                    .on('click', click);
                // nodeEnter.call(tip);
                // Add Circle for the nodes
                nodeEnter.append('circle')
                    .attr('class', 'node')
                    .attr('r', 1e-6)
                    .style("fill", function (d) {
                        return d._children ? "#2196F3" : "#fff";
                    })
                // .on('mouseover', tip.show) // add tip
                // .on('mouseout', tip.hide);

                //////////// adds images as nodes
                //////////nodeEnter.append("image")
                //////////    .attr("xlink:href", function (d) { return d.data.name; })
                //////////    .attr("x", "-12px")
                //////////    .attr("y", "-12px")
                //////////    .attr("width", "24px")
                //////////    .attr("height", "24px");

                // Add labels for the nodes
                nodeEnter.append('text')
                    .attr("dy", ".35em")
                    .attr("x", function (d) {
                        return d.children || d._children ? -13 : 13;
                    })
                    .attr("text-anchor", function (d) {
                        return d.children || d._children ? "end" : "start";
                    })
                    .text(function (d) { return d.data.name; });

                // UPDATE
                var nodeUpdate = nodeEnter.merge(node);
                // Transition to the proper position for the node
                nodeUpdate.transition()
                    .duration(duration)
                    .attr("transform", function (d) {
                        return "translate(" + d.y + "," + d.x + ")";
                    });

                // Update the node attributes and style
                nodeUpdate.select('circle.node')
                    .attr('r', 5)
                    .style("fill", function (d) {
                        if (getPath(d) === key) {
                            // clicked leaf node
                            //document.querySelector('button-icon jarviswidget-toggle-btn').click();
                            filldepartments();
                            applicationDetails();
                            return 'blue';
                        } else if (d.class === 'match') {
                            return 'green';
                        }
                        return d._children ? "#2196F3" : "#fff";
                    })
                    .style("stroke", function (d) {
                        if (getPath(d) === key) {
                            // clicked leaf node
                            return 'lightblue';
                        } else {
                            return '#2196F3';
                        }

                    })
                    .attr('cursor', 'pointer');


                // Remove any exiting nodes
                var nodeExit = node.exit().transition()
                    .duration(duration)
                    .attr("transform", function (d) {
                        return "translate(" + source.y + "," + source.x + ")";
                    })
                    .remove();

                // On exit reduce the node circles size to 0
                nodeExit.select('circle')
                    .attr('r', 1e-6);

                // On exit reduce the opacity of text labels
                nodeExit.select('text')
                    .style('fill-opacity', 1e-6);

                // ****************** links section ***************************

                // Update the links...
                var link = svg.selectAll('path.link')
                    .data(links, function (d) { return d.id; });

                // Enter any new links at the parent's previous position.
                var linkEnter = link.enter().insert('path', "g")
                    .attr("class", "link")
                    .attr('d', function (d) {
                        var o = { x: source.x0, y: source.y0 }
                        return diagonal(o, o)
                    });

                // UPDATE
                var linkUpdate = linkEnter.merge(link);

                // Transition back to the parent element position
                linkUpdate.transition()
                    .duration(duration)
                    .attr('d', function (d) { return diagonal(d, d.parent) })
                    .style("stroke", function (d) {
                        if (d.class === 'match') {
                            return '#3fb986'
                        }
                    });

                // Remove any exiting links
                var linkExit = link.exit().transition()
                    .duration(duration)
                    .attr('d', function (d) {
                        var o = { x: source.x, y: source.y }
                        return diagonal(o, o)
                    })
                    .remove();

                // Store the old positions for transition.
                nodes.forEach(function (d) {
                    d.x0 = d.x;
                    d.y0 = d.y;
                });

                // Creates a curved (diagonal) path from parent to the child nodes
                function diagonal(s, d) {

                    var path = `M ${s.y} ${s.x}
                    C ${(s.y + d.y) / 2} ${s.x},
                      ${(s.y + d.y) / 2} ${d.x},
                      ${d.y} ${d.x}`

                    return path;
                }

                // Toggle children on click.
                function click(d) {
                    if (!d.children && !d._children) {
                        //leaf node
                        key = getPath(d);
                        d.path = key;
                    }
                    //d.children is expanded children
                    //d._children is collapes children
                    if (d.children) {
                        d._children = d.children;
                        d.children = null;
                    } else {
                        d.children = d._children;
                        d._children = null;
                    }
                    update(d);
                }
                // return the path from root to this node
                function getPath(d) {
                    var path = [];
                    while (d.parent !== null) {
                        path.unshift(d.data.name)
                        d = d.parent
                    }
                    return path.join('.')
                }
            }
            // resize the chart width based on window size
            window.addEventListener('resize', _.debounce(function () {

                update(root)
            }, 200));


        }

            /*Fill Data Functions Ends here */



            /***  Map details multilevel code starts here. ***/




        function filldepartments() {

            /* Data Center Details  Starts Here */

            document.getElementById("datacentersdetail").innerHTML = "";
            var treeData = {
                "value": "DC2",
                "children": [{
                    "value": "DC2-1",
                    "parent": "DC2"
                   
                },
                {
                    "value": "DC2-2",
                    "parent": "DC2"
                    },
                    {
                        "value": "DC2-3",
                        "parent": "DC2"
                    }]
            };


            // Set dimensions and margins for diagram
            var margin = { top: 80, bottom: 80 },
                width = 600,
                height = 400 - margin.top - margin.bottom;

            // append the svg object to the body of the page
            // appends a 'group' element to 'svg'
            // moves the 'group' element to the top left margin   
            var svg = d3.select("#datacentersdetail").append("svg")
                .attr("width", "100%")
                .attr("height", "100%")//height + margin.top + margin.bottom)
                .attr("viewBox", "0 0 600 350")
                .append("g")
                .attr("transform", "translate(0," + margin.top + ")");

            var i = 0,
                duration = 750,
                root;

            // Declares a tree layout and assigns the size
            var treemap = d3.tree().size([width, height]);

            // Assigns parent, children, height, depth
            root = d3.hierarchy(treeData, function (d) {
                console.log(d.children)
                return d.children;
            });

            root.x0 = width / 2;
            root.y0 = 0;


            update(root);

            // Collapse the node and all it's children
            function collapse(d) {
                if (d.children) {
                    d._children = d.children
                    d._children.forEach(collapse)
                    d.children = null;
                }
            }

            // Update
            function update(source) {
                // Assigns the x and y position for the nodes
                var treeData = treemap(root);

                // Compute the new tree layout.
                var nodes = treeData.descendants(),
                    links = treeData.descendants().slice(1);

                // Normalize for fixed-depth
                nodes.forEach(function (d) { d.y = d.depth * 100 });

                // *************** Nodes Section ***************

                // Update the nodes...
                var node = svg.selectAll('g.nodedata')
                    .data(nodes, function (d) { return d.id || (d.id = ++i); });

                // Enter any new nodes at the parent's previous position.
                var nodeEnter = node.enter().append('g')
                    .attr('class', 'nodedata')
                    .attr("transform", function (d) {
                        return "translate(" + source.x0 + "," + source.y0 + ")";
                    })
                    .on('click', click);

                // Add Circle for the nodes
                nodeEnter.append('circle')
                    .attr('class', 'nodedata')
                    .attr('r', 1e-6)
                    .style("fill", function (d) {
                        return d._children ? "lightsteelblue" : "#fff";
                    });

                // Add labels for the nodes
                nodeEnter.append('text')
                    .attr("dy", ".35em")
                    .attr("x", function (d) {
                        return d.children || d._children ? -13 : 13;
                    })
                    .attr("text-anchor", function (d) {
                        return d.children || d._children ? "end" : "start";
                    })
                    .text(function (d) { return d.data.value; });





                // Update
                var nodeUpdate = nodeEnter.merge(node);

                // Transition to the proper position for the nodes
                nodeUpdate.transition()
                    .duration(duration)
                    .attr("transform", function (d) {
                        return "translate(" + d.x + "," + d.y + ")";
                    });

                // Update the node attributes and style
                nodeUpdate.select('circle.nodedata')
                    .attr('r', 10)
                    .style("fill", function (d) {
                        return d._children ? "lightsteelblue" : "#fff";
                    })
                    .attr('cursor', 'pointer');

                // Remove any exiting nodes
                nodeExit = node.exit().transition()
                    .duration(duration)
                    .attr("transform", function (d) {
                        return "translate(" + source.x + "," + source.y + ")";
                    })
                    .remove();

                // On exit reduce the node circles size to 0
                nodeExit.select('circle')
                    .attr('r', 1e-6);

                // On exit reduce the opacity of text lables  
                nodeExit.select('text')
                    .style('fill-opacity', 1e-6)

                // *************** Links Section ***************

                // Update the links...
                var link = svg.selectAll('path.linkdata')
                    .data(links, function (d) { return d.id; });

                // Enter any new links at the parent's previous position
                var linkEnter = link.enter().insert('path', "g")
                    .attr("class", "linkdata")
                    .attr('d', function (d) {
                        var o = { x: source.x0, y: source.y0 };
                        return diagonal(o, o);
                    });

                // Update
                var linkUpdate = linkEnter.merge(link);

                // Transition back to the parent element position
                linkUpdate.transition()
                    .duration(duration)
                    .attr('d', function (d) { return diagonal(d, d.parent) });

                // Remove any existing links
                var linkExit = link.exit().transition()
                    .duration(duration)
                    .attr('d', function (d) {
                        var o = { x: source.x, y: source.y };
                    })
                    .remove();

                // Store the old positions for transition.
                nodes.forEach(function (d) {
                    d.x0 = d.x;
                    d.y0 = d.y;
                });

                // Create a curved (diagonal) path from parent to the child nodes
                function diagonal(s, d) {
                    path = `M ${s.x} ${s.y}
        C ${(s.x + d.x) / 2} ${s.y},
          ${(s.x + d.x) / 2} ${d.y},
          ${d.x} ${d.y}`

                    return path;
                }

                // Toggle children on click
                function click(d) {
                    if (d.children) {
                        d._children = d.children;
                        d.children = null;
                    }
                    else {
                        d.children = d._children;
                        d._children = null;
                    }
                    update(d);
                }
            }
        /*Data Center Details Section Ends Here */




        }



        /**Application Wise deails Data visualization**/

        function applicationDetails() {
        var appData =
        {
            "name": "Top Level",
            "children": [
                {
                    "name": "Level 2: A",
                    "children": [
                        { "name": "Son of A" },
                        { "name": "Daughter of A" }
                    ]
                },
                { "name": "Level 2: B" }
            ]
        };

        // Set the dimensions and margins of the diagram
        var margin = { top: 20, right: 90, bottom: 30, left: 90 },
            width = document.getElementById("applicationdetails").clientWidth - margin.left - margin.right,
            height = 500 - margin.top - margin.bottom;

        alert(JSON.stringify(appData));

        // append the svg object to the body of the page
        // appends a 'group' element to 'svg'
        // moves the 'group' element to the top left margin
        var svg = d3.select("#applicationdetails").append("svg")
            .attr("width", width + margin.right + margin.left)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform", "translate("
                + margin.left + "," + margin.top + ")");

        var i = 0,
            duration = 750,
            root;

        // declares a tree layout and assigns the size
        var treemap = d3.tree().size([height, width]);

        // Assigns parent, children, height, depth
        root = d3.hierarchy(appData, function (d) { return d.children; });
        root.x0 = height / 2;
        root.y0 = 0;

        // Collapse after the second level
        root.children.forEach(collapse);

        update(root);

        // Collapse the node and all it's children
        function collapse(d) {
            if (d.children) {
                d._children = d.children
                d._children.forEach(collapse)
                d.children = null
            }
        }

        function update(source) {

            // Assigns the x and y position for the nodes
            var appData = treemap(root);

            // Compute the new tree layout.
            var nodes = appData.descendants(),
                links = appData.descendants().slice(1);

            // Normalize for fixed-depth.
            nodes.forEach(function (d) { d.y = d.depth * 180 });

            // ****************** Nodes section ***************************

            // Update the nodes...
            var node = svg.selectAll('g.nodeapp')
                .data(nodes, function (d) { return d.id || (d.id = ++i); });

            // Enter any new modes at the parent's previous position.
            var nodeEnter = node.enter().append('g')
                .attr('class', 'nodeapp')
                .attr("transform", function (d) {
                    return "translate(" + source.y0 + "," + source.x0 + ")";
                })
                .on('click', click);

            // Add Circle for the nodes
            nodeEnter.append('circle')
                .attr('class', 'nodeapp')
                .attr('r', 1e-6)
                .style("fill", function (d) {
                    return d._children ? "lightsteelblue" : "#fff";
                });

            // Add labels for the nodes
            nodeEnter.append('text')
                .attr("dy", ".35em")
                .attr("x", function (d) {
                    return d.children || d._children ? -13 : 13;
                })
                .attr("text-anchor", function (d) {
                    return d.children || d._children ? "end" : "start";
                })
                .text(function (d) { return d.data.name; });

            // UPDATE
            var nodeUpdate = nodeEnter.merge(node);

            // Transition to the proper position for the node
            nodeUpdate.transition()
                .duration(duration)
                .attr("transform", function (d) {
                    return "translate(" + d.y + "," + d.x + ")";
                });

            // Update the node attributes and style
            nodeUpdate.select('circle.nodeapp')
                .attr('r', 10)
                .style("fill", function (d) {
                    return d._children ? "lightsteelblue" : "#fff";
                })
                .attr('cursor', 'pointer');


            // Remove any exiting nodes
            var nodeExit = node.exit().transition()
                .duration(duration)
                .attr("transform", function (d) {
                    return "translate(" + source.y + "," + source.x + ")";
                })
                .remove();

            // On exit reduce the node circles size to 0
            nodeExit.select('circle')
                .attr('r', 1e-6);

            // On exit reduce the opacity of text labels
            nodeExit.select('text')
                .style('fill-opacity', 1e-6);

            // ****************** links section ***************************

            // Update the links...
            var link = svg.selectAll('path.linkapp')
                .data(links, function (d) { return d.id; });

            // Enter any new links at the parent's previous position.
            var linkEnter = link.enter().insert('path', "g")
                .attr("class", "linkapp")
                .attr('d', function (d) {
                    var o = { x: source.x0, y: source.y0 }
                    return diagonal(o, o)
                });

            // UPDATE
            var linkUpdate = linkEnter.merge(link);

            // Transition back to the parent element position
            linkUpdate.transition()
                .duration(duration)
                .attr('d', function (d) { return diagonal(d, d.parent) });

            // Remove any exiting links
            var linkExit = link.exit().transition()
                .duration(duration)
                .attr('d', function (d) {
                    var o = { x: source.x, y: source.y }
                    return diagonal(o, o)
                })
                .remove();

            // Store the old positions for transition.
            nodes.forEach(function (d) {
                d.x0 = d.x;
                d.y0 = d.y;
            });

            // Creates a curved (diagonal) path from parent to the child nodes
            function diagonal(s, d) {

                path = `M ${s.y} ${s.x}
            C ${(s.y + d.y) / 2} ${s.x},
              ${(s.y + d.y) / 2} ${d.x},
              ${d.y} ${d.x}`

                return path
            }

            // Toggle children on click.
            function click(d) {
                if (d.children) {
                    d._children = d.children;
                    d.children = null;
                } else {
                    d.children = d._children;
                    d._children = null;
                }
                update(d);
            }
        }



        }

       /*** Application Ends here ***/
      
    </script>






}
